(()=>{"use strict";var t=require("@babel/runtime-corejs3/core-js-stable/instance/trim");document.addEventListener("DOMContentLoaded",()=>{const e={customText:document.getElementById("customText"),speedPreset:document.getElementById("speedPreset"),customSpeedGroup:document.getElementById("customSpeedGroup"),customDelay:document.getElementById("customDelay"),startDelay:document.getElementById("startDelay"),enableMistakes:document.getElementById("enableMistakes"),enablePauses:document.getElementById("enablePauses"),startBtn:document.getElementById("startBtn"),stopBtn:document.getElementById("stopBtn"),clipboardBtn:document.getElementById("clipboardBtn"),status:document.getElementById("status"),mainButtons:document.getElementById("mainButtons"),stopButtonGroup:document.getElementById("stopButtonGroup"),statsSection:document.getElementById("statsSection"),progressBarContainer:document.getElementById("progressBarContainer"),progressBar:document.getElementById("progressBar"),wpmStat:document.getElementById("wpmStat"),progressStat:document.getElementById("progressStat"),timeStat:document.getElementById("timeStat")};let n=!1,a=null,s="";function o(){const t="custom"===e.speedPreset.value;e.customSpeedGroup.style.display=t?"flex":"none"}function r(t){n=t,t?(e.mainButtons.style.display="none",e.stopButtonGroup.style.display="block",e.statsSection.style.display="grid",e.progressBarContainer.style.display="block",a=Date.now()):(e.mainButtons.style.display="grid",e.stopButtonGroup.style.display="none",e.statsSection.style.display="none",e.progressBarContainer.style.display="none",a=null),[e.customText,e.speedPreset,e.customDelay,e.startDelay,e.enableMistakes,e.enablePauses].forEach(e=>e.disabled=t)}function c(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";e.status.textContent=t,e.status.className="status ".concat(n)}e.speedPreset.addEventListener("change",o),e.startBtn.addEventListener("click",async function(){if(!n)try{var o;let i=t(o=e.customText.value).call(o);if(!i)try{i=await navigator.clipboard.readText(),i&&t(i).call(i)||(i="This is a test of human-like typing. The quick brown fox jumps over the lazy dog.",c("Using default text - no custom text or clipboard content found","info"))}catch(t){i="This is a test of human-like typing. The quick brown fox jumps over the lazy dog.",c("Using default text - clipboard access denied","info")}s=i;const l=function(){const t=e.speedPreset.value;let n,a;switch(t){case"slow":n=200,a=800;break;case"fast":n=50,a=200;break;case"custom":const t=parseInt(e.customDelay.value)||150;n=Math.max(10,t-50),a=t+100;break;default:n=100,a=400}return{minDelay:n,maxDelay:a,startDelay:parseFloat(e.startDelay.value)||3,enableMistakes:e.enableMistakes.checked,enablePauses:e.enablePauses.checked,speedPreset:t}}();!function(t){try{localStorage.setItem("pasteHumanSettings",JSON.stringify(t))}catch(t){console.warn("Could not save settings:",t)}}(l),await async function(t){if(t<=0)return;const e=Date.now()+1e3*t;return new Promise(t=>{const n=()=>{const a=Date.now(),s=Math.max(0,Math.ceil((e-a)/1e3));s>0?(c("Starting in ".concat(s," seconds... Click in a text field now!"),"info"),setTimeout(n,100)):(c("Typing started!","success"),t())};n()})}(l.startDelay);const d=await chrome.tabs.query({active:!0,currentWindow:!0});if(!d||0===d.length)throw new Error("No active tab found");const u=await chrome.tabs.sendMessage(d[0].id,{action:"startTyping",text:i,settings:l});if(!u||!u.success)throw new Error((null==u?void 0:u.error)||"Failed to start typing");r(!0),function(){if(!n)return;const t=()=>{if(!n||!a)return;const o=(Date.now()-a)/1e3,r=Math.min(100,o/(.15*s.length)*100),c=s.length*(r/100)/5,i=o>0?Math.round(c/o*60):0;e.wpmStat.textContent=Math.max(0,i),e.progressStat.textContent=Math.round(r),e.timeStat.textContent="".concat(Math.round(o),"s"),e.progressBar.style.width="".concat(r,"%"),n&&setTimeout(t,1e3)};t()}()}catch(t){c("Error: ".concat(t.message),"error"),r(!1)}}),e.stopBtn.addEventListener("click",async function(){try{const t=await chrome.tabs.query({active:!0,currentWindow:!0});t&&t.length>0&&await chrome.tabs.sendMessage(t[0].id,{action:"stopTyping"}),r(!1),c("Typing stopped","warning")}catch(t){c("Could not stop typing","error")}}),e.clipboardBtn.addEventListener("click",async function(){try{c("Reading clipboard...","info"),e.clipboardBtn.disabled=!0;const n=await navigator.clipboard.readText();n&&t(n).call(n)?(e.customText.value=n,c("Clipboard text loaded (".concat(n.length," characters)"),"success")):c("Clipboard is empty","warning")}catch(t){c("Could not read clipboard - check permissions","error")}finally{e.clipboardBtn.disabled=!1}}),c("Ready to type","info"),function(){try{const t=localStorage.getItem("pasteHumanSettings");if(t){const n=JSON.parse(t);n.speedPreset&&(e.speedPreset.value=n.speedPreset),n.customDelay&&(e.customDelay.value=n.customDelay),void 0!==n.startDelay&&(e.startDelay.value=n.startDelay),void 0!==n.enableMistakes&&(e.enableMistakes.checked=n.enableMistakes),void 0!==n.enablePauses&&(e.enablePauses.checked=n.enablePauses),o()}}catch(t){console.warn("Could not load settings:",t)}}()})})();
//# sourceMappingURL=popup.js.map